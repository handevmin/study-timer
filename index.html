<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공부특별시</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at right top, #2860b3, #164085, #00215A);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        
        .container {
            display: flex;
            width: 100%;
            max-width: 1500px;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            flex-wrap: wrap;
        }
        
        .content {
            flex: 1;
            text-align: center;
            min-width: 300px;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 50px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .logo-icon {
            width: 120px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 25px;
        }
        
        .logo-icon img {
            height: 140%;
            filter: brightness(0) invert(1); /* 이미지를 흰색으로 변환 */
        }
        
        .logo-text-container {
            display: flex;
            flex-direction: column;
        }
        
        .logo-text {
            font-size: 80px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 30px;
            margin-left: 0;
        }
        
        .message {
            font-size: 30px;
            line-height: 1.6;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .time-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .time {
            font-size: 170px;
        }
        
        .time-label {
            font-size: 60px;
            margin-right: 25px;
        }
        
        .button-container {
            display: flex;
            justify-content: center;
        }
        
        .button {
            display: inline-block;
            padding: 18px 50px;
            font-size: 36px;
            background-color: transparent;
            color: white;
            border: 3px solid white;
            border-radius: 15px;
            text-decoration: none;
            text-align: center;
        }
        
        .clock {
            flex: 1;
            max-width: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
        }
        
        .clock-face {
            width: 500px;
            height: 500px;
            border-radius: 50%;
            border: none;
            box-shadow: 0 0 0 5px transparent;
            position: relative;
            background-color: #00215A;
            background: radial-gradient(circle at center, #143b7d, #00215A);
            position: relative;
        }
        
        .clock-face::before {
            content: '';
            position: absolute;
            top: -5px;
            right: -5px;
            bottom: -5px;
            left: -5px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3a8eff, #82c6ff, #1a78e6, #3a8eff);
            z-index: -1;
        }
        
        .clock-hand {
            position: absolute;
            background-color: #3a8eff;
            transform-origin: bottom center;
            z-index: 10;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }
        
        .hour-hand {
            width: 36px;
            height: 150px;
            top: 100px;
            left: 232px;
            background: linear-gradient(to top, #b6c0d3, #ebebeb);
            clip-path: polygon(50% 0%, 40% 100%, 60% 100%);
        }
        
        .minute-hand {
            width: 30px;
            height: 200px;
            top: 50px;
            left: 235px;
            background: linear-gradient(to top, #b6c0d3, #ebebeb);
            clip-path: polygon(50% 0%, 35% 100%, 65% 100%);
        }
        
        .second-hand {
            width: 3px;
            height: 225px;
            top: 25px;
            left: 248.5px;
            background-color: #6bb8ff;
            clip-path: polygon(50% 0%, 20% 100%, 80% 100%);
        }
        
        .center-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle at 40% 40%, #ebebeb, #1a78e6);
            border-radius: 50%;
            top: 240px;
            left: 240px;
            box-shadow: 0 0 10px 3px rgba(46, 130, 255, 0.7);
            z-index: 20;
        }
        
        .tick {
            position: absolute;
            width: 3px;
            height: 20px;
            background-color: white;
            left: 248.5px;
            transform-origin: center 250px;
        }
        
        /* 시각 표시 - 더 길게 조정 */
        .tick.hour {
            height: 25px;
            width: 4px;
        }
        
        /* 12개의 시각 표시 */
        .tick:nth-child(1) { transform: rotate(0deg); top: 0; }
        .tick:nth-child(2) { transform: rotate(30deg); top: 0; }
        .tick:nth-child(3) { transform: rotate(60deg); top: 0; }
        .tick:nth-child(4) { transform: rotate(90deg); top: 0; }
        .tick:nth-child(5) { transform: rotate(120deg); top: 0; }
        .tick:nth-child(6) { transform: rotate(150deg); top: 0; }
        .tick:nth-child(7) { transform: rotate(180deg); top: 0; }
        .tick:nth-child(8) { transform: rotate(210deg); top: 0; }
        .tick:nth-child(9) { transform: rotate(240deg); top: 0; }
        .tick:nth-child(10) { transform: rotate(270deg); top: 0; }
        .tick:nth-child(11) { transform: rotate(300deg); top: 0; }
        .tick:nth-child(12) { transform: rotate(330deg); top: 0; }
        
        /* 알림 메시지 스타일 */
        #message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(58, 142, 255, 0.9), rgba(26, 120, 230, 0.9));
            color: white;
            padding: 30px 50px;
            border-radius: 15px;
            font-size: 40px;
            font-weight: bold;
            text-align: center;
            z-index: 200;
            display: none;
            box-shadow: 0 0 30px rgba(0, 33, 90, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.3);
            min-width: 400px;
            animation: fadeInOut 5s ease-in-out;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            15% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            85% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }
        
        #message:not(:empty) {
            display: block;
        }
        
        /* 커스텀 메시지 입력 영역 */
        .custom-message-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 600px;
        }
        
        #custom-message {
            width: 100%;
            padding: 10px;
            background-color: rgba(0, 33, 90, 0.7);
            border: 2px solid #3a8eff;
            border-radius: 8px;
            color: white;
            font-size: 16px;
        }

        /* 반응형 디자인을 위한 미디어 쿼리 */
        @media screen and (max-width: 1200px) {
            .logo-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .container {
                flex-direction: column;
                padding: 20px;
                overflow-y: auto;
                justify-content: center;
            }
            
            .content {
                margin-bottom: 30px;
                width: 100%;
            }
            
            .clock-face {
                width: 400px;
                height: 400px;
            }
            
            .center-dot {
                top: 190px;
                left: 190px;
            }
            
            .hour-hand {
                top: 80px;
                left: 182px;
                height: 120px;
            }
            
            .minute-hand {
                top: 40px;
                left: 185px;
                height: 160px;
            }
            
            .second-hand {
                top: 20px;
                left: 198.5px;
                height: 180px;
            }
            
            .tick {
                left: 198.5px;
                transform-origin: center 200px;
            }
            
            .logo-text {
                font-size: 60px;
                margin-top: 30px;
            }
            
            .message {
                font-size: 24px;
            }
            
            .time {
                font-size: 130px;
            }
            
            .time-label {
                font-size: 45px;
            }
            
            .button {
                font-size: 30px;
                padding: 15px 40px;
            }
        }
        
        @media screen and (max-width: 768px) {
            body {
                overflow-y: auto;
                height: auto;
                min-height: 100vh;
            }

            .logo-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 0px;
            }
            
            .container {
                padding: 10px;
            }
            
            .content {
                margin-bottom: 15px;
            }
            
            .logo {
                margin-top: 20px;
                flex-direction: column;
                margin-bottom: 15px;
            }
            
            .logo-icon {
                width: 90px;
                height: 90px;
                margin-right: 0;
                margin-bottom: 5px;
            }
            
            .logo-text {
                font-size: 45px;
            }
            
            .message {
                font-size: 18px;
                margin-bottom: 25px;
                padding: 0 10px;
            }
            
            .time-container {
                margin-bottom: 25px;
            }
            
            .time {
                font-size: 90px;
            }
            
            .time-label {
                font-size: 32px;
                margin-right: 12px;
            }
            
            .button {
                font-size: 22px;
                padding: 10px 25px;
            }
            
            .clock-face {
                width: 280px;
                height: 280px;
            }
            
            .center-dot {
                top: 130px;
                left: 130px;
            }
            
            .hour-hand {
                top: 60px;
                left: 122px;
                height: 80px;
                width: 36px;
            }
            
            .minute-hand {
                top: 30px;
                left: 125px;
                height: 110px;
                width: 30px;
            }
            
            .second-hand {
                top: 15px;
                left: 138.5px;
                height: 125px;
            }
            
            .tick {
                left: 138.5px;
                transform-origin: center 140px;
            }
            
            #message {
                padding: 18px 25px;
                font-size: 22px;
                min-width: 280px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .logo-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 0px;
            }
            
            .container {
                padding: 10px;
            }
            
            .content {
                margin-bottom: 15px;
            }
            
            .logo {
                margin-top: 20px;
                flex-direction: column;
                margin-bottom: 15px;
            }

            .logo-icon {
                width: 70px;
                height: 70px;
            }
            
            .logo-text {
                font-size: 35px;
            }
            
            .message {
                font-size: 16px;
                line-height: 1.4;
                margin-bottom: 20px;
            }
            
            .time {
                font-size: 60px;
            }
            
            .time-label {
                font-size: 24px;
                margin-right: 8px;
            }
            
            .button {
                font-size: 18px;
                padding: 8px 20px;
                border-width: 2px;
            }
            
            .clock-face {
                width: 220px;
                height: 220px;
            }
            
            .center-dot {
                top: 103px;
                left: 102px;
                width: 14px;
                height: 14px;
            }
            
            .hour-hand {
                top: 45px;
                left: 93px;
                height: 65px;
                width: 32px;
            }
            
            .minute-hand {
                top: 26px;
                left: 96px;
                height: 85px;
                width: 26px;
            }
            
            .second-hand {
                top: 20px;
                left: 108.5px;
                height: 90px;
            }
            
            .tick {
                left: 108.5px;
                transform-origin: center 110px;
            }
            
            #message {
                padding: 12px 18px;
                font-size: 18px;
                min-width: 220px;
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- 알림 메시지 표시 요소 -->
    <div id="message"></div>
    
    <div class="container">
        <div class="content">
            <div class="logo-container">
                <div class="logo">
                    <div class="logo-icon">
                        <img src="logo.png" alt="공부특별시 로고">
                    </div>
                    <div class="logo-text-container">
                        <div class="logo-text">공부특별시</div>
                    </div>
                </div>
            </div>
            <div class="message">
                당신의 꿈을 향한 모든 순간이 의미있기를.<br>
                저희가 여러분과 함께하겠습니다.
            </div>
            <div class="time-container">
                <span class="time-label" id="ampm">오후</span>
                <span class="time" id="clock">8:59</span>
            </div>
            <div class="button-container">
                <a href="#" class="button" id="period-display">11교시</a>
            </div>
        </div>
        <div class="clock">
            <div class="clock-face">
                <!-- 12개의 시간 눈금 -->
                <div class="tick hour"></div>
                <div class="tick"></div>
                <div class="tick"></div>
                <div class="tick hour"></div>
                <div class="tick"></div>
                <div class="tick"></div>
                <div class="tick hour"></div>
                <div class="tick"></div>
                <div class="tick"></div>
                <div class="tick hour"></div>
                <div class="tick"></div>
                <div class="tick"></div>
                <!-- 시계 바늘 -->
                <div class="clock-hand hour-hand"></div>
                <div class="clock-hand minute-hand"></div>
                <div class="clock-hand second-hand"></div>
                <div class="center-dot"></div>
            </div>
        </div>
    </div>
    
    <!-- 오디오 요소 추가 -->
    <audio id="startBell" preload="auto">
        <source src="/audio/start-bell.mp3" type="audio/mpeg">
    </audio>
    <audio id="endBell" preload="auto">
        <source src="/audio/end-bell.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 오디오 요소 참조
        const startBell = document.getElementById('startBell');
        const endBell = document.getElementById('endBell');

        // 오디오 볼륨 설정
        startBell.volume = 1.0;
        endBell.volume = 1.0;

        // 메시지 표시 함수 추가
        function showMessage(text) {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            
            // 5초 후에 메시지 내용을 지워서 화면에서 없애기
            setTimeout(() => {
                messageElement.textContent = '';
            }, 5000);
        }

        // 오디오 재생 함수
        function playBell(audio) {
            audio.currentTime = 0;
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    console.log('오디오 재생 성공');
                })
                .catch(error => {
                    console.log('오디오 재생 실패, 다시 시도:', error);
                    setTimeout(() => playBell(audio), 100);
                });
            }
        }

        // 교시 계산 함수
        function calculatePeriod(hours) {
            if (hours >= 10 && hours <= 22) {
                return hours - 9;
            }
            return '수업 시간 외';
        }

        // 타이머를 저장할 변수
        let nextClassTimer;
        
        // 다음 수업 시작 또는 종료 시간을 계산하고 타이머 설정하는 함수
        function scheduleNextClassTime() {
            const now = new Date();
            const nextTime = new Date(now);
            
            // 현재 분이 50분 미만이면 다음 50분을 타겟으로, 아니면 다음 시간 정각을 타겟으로
            if (now.getMinutes() < 50) {
                nextTime.setMinutes(50, 0, 0);
            } else {
                nextTime.setHours(now.getHours() + 1, 0, 0, 0);
            }
            
            // 다음 이벤트까지 남은 시간 (밀리초)
            const timeUntilNext = nextTime - now;
            
            // 기존 타이머 정리
            if (nextClassTimer) {
                clearTimeout(nextClassTimer);
            }
            
            // 다음 이벤트 타이머 설정
            nextClassTimer = setTimeout(() => {
                const eventTime = new Date();
                const hours = eventTime.getHours();
                const minutes = eventTime.getMinutes();
                
                // 10시~22시 사이의 수업 시간만 체크
                if (hours >= 8 && hours <= 22) {
                    // 정각인 경우 수업 시작
                    if (minutes === 0) {
                        const period = calculatePeriod(hours);
                        
                        // 수업 시간 내인 경우와 외인 경우 구분
                        if (typeof period === 'number') {
                            playBell(startBell);
                            showMessage(`${period}교시 시작입니다`);
                        } else {
                            // 수업 시간 외인 경우에는 다른 메시지 표시
                            playBell(startBell);
                            showMessage('자율 학습 시간입니다');
                        }
                    }
                    // 50분인 경우 쉬는 시간
                    else if (minutes === 50) {
                        playBell(endBell);
                        showMessage('쉬는 시간입니다');
                    }
                }
                
                // 다음 이벤트 예약
                scheduleNextClassTime();
            }, timeUntilNext);
            
            console.log(`다음 알림 예약됨: ${nextTime.toLocaleTimeString()}, ${timeUntilNext / 1000}초 후`);
        }

        // 시계 업데이트 함수
        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            const milliseconds = now.getMilliseconds();
            
            const ampm = hours >= 12 ? '오후' : '오전';
            const displayHours = hours % 12;
            const formattedHours = displayHours ? displayHours : 12; // 12시간제로 변환
            
            const formattedTime = `${formattedHours}:${minutes.toString().padStart(2, '0')}`;
            
            document.getElementById('ampm').textContent = ampm;
            document.getElementById('clock').textContent = formattedTime;
            
            // 교시 표시 업데이트
            const period = calculatePeriod(hours);
            document.getElementById('period-display').textContent = 
                typeof period === 'number' ? `${period}교시` : period;
            
            // 시계 바늘 회전 - 부드러운 움직임을 위해 밀리초 고려
            const hourDeg = (formattedHours * 30) + (minutes * 0.5); // 시간당 30도 + 분당 0.5도
            const minuteDeg = minutes * 6 + (seconds * 0.1); // 분당 6도 + 초당 0.1도
            const secondDeg = seconds * 6 + (milliseconds * 0.006); // 초당 6도 + 밀리초 고려
            
            document.querySelector('.hour-hand').style.transform = `rotate(${hourDeg}deg)`;
            document.querySelector('.minute-hand').style.transform = `rotate(${minuteDeg}deg)`;
            document.querySelector('.second-hand').style.transform = `rotate(${secondDeg}deg)`;
        }

        // 시계 업데이트를 위한 인터벌 (100ms마다)
        setInterval(updateClock, 100);

        // 페이지 로드 시 초기화
        updateClock();
        scheduleNextClassTime();

        // 테스트 함수 (브라우저 콘솔에서 호출 가능)
        function testBell(type) {
            if (type === 'start') {
                playBell(startBell);
                showMessage('테스트: 수업 시작 알림');
            } else if (type === 'end') {
                playBell(endBell);
                showMessage('테스트: 쉬는 시간 알림');
            }
        }

        // 커스텀 메시지 처리
        const customMessageInput = document.getElementById('custom-message');
        customMessageInput.addEventListener('input', (e) => {
            localStorage.setItem('customMessage', e.target.value);
        });

        // 페이지 로드 시 저장된 커스텀 메시지 불러오기
        window.addEventListener('load', () => {
            const savedMessage = localStorage.getItem('customMessage');
            if (savedMessage) {
                customMessageInput.value = savedMessage;
            }
        });
    </script>
</body>
</html> 